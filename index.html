<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home_work_18</title>
</head>

<body>

    <script>
        'use strict';

        // Bind

        const person = {
            name: 'Elizabeth'
        }

        function info(phone, email) {
            console.log(`Name: ${this.name}\nNumber of Phone: ${phone}\nEmail: ${email}`);
        }

        //info.bind(person)('12345', 'xxx-xxx-xxx@gmail.com');
        //info.bind(person, '12345')('xxx-xxx-xxx@gmail.com');
        //info.bind(person, '12345', 'xxx-xxx-xxx@gmail.com')();

        /*function bind(fn, context, ...rest) {
            return fn.bind(context, ...rest)
        }*/

        function bind(fn, context, ...rest) {

            return function (...arg) {

                return fn.call(context, ...rest.concat(arg));

            }

        }

        bind(info, person)('12345', 'xxx-xxx-xxx@gmail.com');
        bind(info, person, '12345')('xxx-xxx-xxx@gmail.com');
        bind(info, person, '12345', 'xxx-xxx-xxx@gmail.com')();

        /*  Way by lesson:
        
            const bind = function (fn, context) {
            const necesseraryArgCount = 2;
            const bindArg = Array.prototype.slice.call(arguments, necesseraryArgCount);
            return function () {
                const fnArg = Array.prototype.slice.call(arguments);
                return fn.apply(context, bindArg.concat(fnArg))
            }
        };
        console.log(bind(function () {}, {}, 'Java', 'Script'));
        */


        // Bind + Map


        const arr = [1, 2, 3, 4, 5]

        const map = function (array, cb, thisArg) {

            const res = [];

            for (let i = 0; i < arr.length; i++) {

                res.push(cb.call(thisArg || array[i], array[i], i, array));

            };

            return res;

        }

        const arrToSq = map(arr, function (el, i) {

            return {
                index: i,
                value: el ** 2
            }
        }, {});


        console.log(arrToSq);



        //const arrayTest = [1, 2, 3, 4, 5];
        //const arratTest2 = [11, 22, 33, 44, 55];

        /*function test(arr, n) {
            return arr.map(function (el) {
                return el * n
            });
        }
        console.log(test(arrayTest, 5 ));*/

        /*Array.prototype.test2 = function (n) {
            return this.map(function (el) {
                return el * n
            });
        };
        console.log(arrayTest.test2(5));
        console.log(arratTest2.test2(5));*/


    </script>
</body>

</html>